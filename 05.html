<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Data Binding Warmup</title>
    <script type="text/javascript">
      // Challenge #1
      // start with the code from 04.html
      // using setInterval, make it so that if you change window.pizzaSize in Chrome dev tools
      // the pizzaSize inputs and labels will change with it
      document.addEventListener('DOMContentLoaded', function() {
        setTime()
        var selected = document.querySelectorAll('[data-bind]');
        for (var i = 0; i < selected.length; i++) {
          selected[i].addEventListener('keyup', function() {
            var attr = this.getAttribute('data-bind');
            window[attr] = this.value;
            var apply = document.querySelectorAll('span');
            for (var i = 0; i < apply.length; i++) {
              if (apply[i].getAttribute('data-bind') == attr) {
                apply[i].innerHTML = this.value;
              }
            }
          })
        }
        function setTime() {
          console.log('updating');
          var selections = document.querySelectorAll('[data-bind]')
          for (var i = 0; i < selections.length; i++) {
            var attrib = selections[i].getAttribute('data-bind');
            for (var j = 0; j < selections.length; j++) {
              if (selections[j].getAttribute('data-bind') === attrib) {
                selections[j].innerHTML = window[attrib];
                selections[j].value = window[attrib];
              }
            }
          }
          var timeout = window.setTimeout(setTime, 1000)
        }
      })
    </script>
  </head>
  <body>
    <fieldset>
      <legend>Pizza Size</legend>
      <p>
        <label for="pizza-size">What size would you like your pizza?</label>
        <input type="text" id="pizza-size" name="size" value="" data-bind="pizzaSize">
      </p>
      <p>
        <strong>Size: </strong>
        <span data-bind="pizzaSize"></span>
      </p>
    </fieldset>
    <fieldset>
      <legend>Crust</legend>
      <p>
        <label for="pizza-crust">What crust would you like your pizza?</label>
        <input type="text" id="pizza-crust" name="size" value="" data-bind="pizzaCrust">
      </p>
      <p>
        <strong>Crust: </strong>
        <span data-bind="pizzaCrust"></span>
      </p>
    </fieldset>
    <fieldset>
      <legend>Pizza Size</legend>
      <p>
        <label for="pizza-size-2">What size would you like your pizza?</label>
        <input type="text" id="pizza-size-2" name="size" value="" data-bind="pizzaSize">
      </p>
      <p>
        <strong>Size: </strong>
        <span data-bind="pizzaSize"></span>
      </p>
    </fieldset>
    <fieldset>
      <legend>Crust</legend>
      <p>
        <label for="pizza-crust-2">What crust would you like your pizza?</label>
        <input type="text" id="pizza-crust-2" name="size" value="" data-bind="pizzaCrust">
      </p>
      <p>
        <strong>Crust: </strong>
        <span data-bind="pizzaCrust"></span>
      </p>
    </fieldset>
  </body>
</html>
